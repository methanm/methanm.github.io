
<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="UTF-8" /><title>Racket Reading</title>
        <meta name="author" content="Ethan">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
        <meta property="og:site_name" content="">
        <!--<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" type="text/css" />-->
        <link rel="stylesheet" href="https://methanm.github.io/css/style.css" type="text/css">
        <link rel="stylesheet" href="https://methanm.github.io/css/pygments.css" type="text/css">
        <link rel="stylesheet" href="https://methanm.github.io/fancybox/jquery.fancybox.css" type="text/css">
        <link rel="stylesheet" href="https://methanm.github.io/scrollLoading/style.css" type="text/css">

        <link href='//fonts.googleapis.com/css?family=Titillium+Web:300,400,600' rel='stylesheet' type='text/css'>
        <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">

        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->
        <link rel="shortcut icon" href="https://methanm.github.io/favicon.ico" type="image/x-icon">
        <link rel="icon" href="https://methanm.github.io/favicon.ico" type="image/x-icon">
        <link rel="apple-apple-touch-icon" href="https://methanm.github.io/apple-touch-icon-iphone-60x60.png">
        <link rel="apple-apple-touch-icon" sizes="60x60" href="https://methanm.github.io/apple-touch-icon-ipad-76x76.png">
        <link rel="apple-apple-touch-icon" sizes="114x114" href="https://methanm.github.io/apple-touch-icon-iphone-retina-120x120.png">
        <link rel="apple-apple-touch-icon" sizes="144x144" href="https://methanm.github.io/apple-touch-icon-ipad-retina-152x152.png">
        <!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
</head>

<body>
    <div id="wrap">
        <header id="header">
<div id="header-outer" class="outer">
    <div class="container">
        <div class="container-inner">
            <div id="header-title">
                <h1 class="logo-wrap">
                    <a href="https://methanm.github.io/" class="logo">Ethan's Thoughts</a>
                </h1>

                <h2 class="subtitle-wrap">
                    <p class="subtitle">I write what I think.</p>
                </h2>

            </div>
            <div id="header-inner" class="nav-container">
                <a id="main-nav-toggle" class="nav-icon"></a>
                <div class="nav-container-inner">
                    <ul id="main-nav">
                                <li class="main-nav-list-item"><a class="main-nav-list-link" href="https://methanm.github.io/">Home</a></li>
                                <li class="main-nav-list-item"><a class="main-nav-list-link" href="https://methanm.github.io/archives">Archives</a></li>
                                <li class="main-nav-list-item"><a class="main-nav-list-link" href="https://methanm.github.io/about">About</a></li>
                    </ul>
                    <nav id="sub-nav">
                    <div id="search-form-wrap">
                        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><input type="hidden" name="q" value="site:https://methanm.github.io/https://methanm.github.io/"></form>
                    </div>
                    </nav>
                </div>
            </div>
        </div>
    </div>
</div>
</header>

        <div class="container">
            <div class="main-body container-inner">
                <div class="main-body-inner">
                    <section id="main">
                        <div class="main-body-header">
                            <h1 class="header">Article</h1>
                        </div>
                        <div class="main-body-content">
                            






<article class="article article-single article-type-article" itemscope="" itemprop="blogarticle">
    <div class="article-inner">

        <header class="article-header">
            <h1 class="article-title" itemprop="name">Racket Reading</h1>
        </header>

        <p class="article-byline">
            <a href="https://methanm.github.io/Racket-Reading/" class="article-date">
                <time datetime="2016-10-08T13:12:00.000Z" itemprop="datePublished">2016-10-08</time>
            </a>
        </p>
        <div class="article-entry" itemprop="articleBody"><p>A bit of Racket potpourri lately as I am reading through some material as well
as working on Euler problems; more on the latter after this.</p>
<p>One of the reasons I became interested in Racket was its apparent utility
for writing domain-specific languages. Starting from there seemed like a tall
order, so I've spent a good bit of time&mdash;not all of it, mind
you&mdash;working on Euler problems in what little remains of my spare time.</p>
<p>In the interim, though, I've come across several reference works through some
<a href="http://www.intertwingly.net/stories/2002/03/13/manufacturedSerendipity.html">manufactured
serendipity</a>
that are worth noting:</p>
<ul>
<li>
<p><a href="http://ep.yimg.com/ty/cdn/paulgraham/onlisp.pdf">On LISP</a> &mdash; Paul
   Graham's classic. I haven't read through it all, but it struck me in the
   beginning of the read that many of his examples were not very well
   motivated. I felt the same way when reading <em>ANSI Common Lisp</em> during my
   undergrad days.</p>
</li>
<li>
<p><a href="http://www.gigamonkeys.com/book/">Practical Common LISP</a> &mdash; Peter
   Seibel's more recent work. This I haven't read in any detail, but I found
   his discussion of
   <a href="http://www.gigamonkeys.com/book/macros-standard-control-constructs.html">macros</a>
   interesting. There are a number of good chapters here that show some fairly
   typical applications written in LISP.</p>
</li>
<li>
<p><a href="http://cs.brown.edu/~sk/Publications/Papers/Published/sk-automata-macros/paper.pdf">Automata Using
   Macros</a>
   &mdash; An educational (!) paper by Shriram Krishnamurthi. I don't know how
   I happened upon it, but it's an excellent read and only 14 pages, including
   references. One of the hardest things to do in education, I've found, is to
   make examples that grow with the reader. In describing basic finite-state
   machines and a DSL to represent them, Krishnamurthi progresses very
   naturally through different representations and structures finally arriving
   at an implementation using macros.</p>
</li>
<li>
<p><a href="http://queue.acm.org/detail.cfm?id=2068896">Creating Languages in Racket</a>
   &mdash; an article in <em>ACM Queue</em> by Matt Flatt. This is the one that
   started it all for me.</p>
</li>
<li>
<p><a href="http://matt.might.net/articles/higher-order-list-operations/">Higher-order List Operations in Racket and
   Haskell</a>
   &mdash; from Matt Might's blog. This was one of the first articles I found
   that connected with me because it described me to the core:</p>
</li>
</ul>
<blockquote>
<p>There is a pattern with students learning functional programming.</p>
<p>First, they try to use loops and mutation; this ends with awkward, broken
programs. There is confusion and aggravation. Even hostility.</p>
<p>Eventually, they accept and embrace recursion.</p>
<p>But, then they write too much.</p>
</blockquote>
<p>This last article is the one that I kind of finally "got" when working through
<a href="https://projecteuler.net/problem=5">Euler 5</a>, which is asking for the least
common multiple of the numbers from 1 to 20 inclusive.</p>
<p>While there are undoubtedly more obvious solutions, the preceding questions
about the prime factorization of numbers leads quite directly to a least
common multiple implementation. Unfortunately my solutions all rely on hash
tables&mdash;one of those foibles Dr Might mentions above&mdash;and I remain
unpersuaded of their suitability.</p>
<p>Now the Least Common Multiple is related directly to the Greatest Common
Divisor, which can be computed efficiently using <a href="https://en.wikipedia.org/wiki/Euclidean_algorithm">Euclid's
Method</a>. The least common
multiple of two numbers (say <em>a</em> and <em>b</em>) is the quotient of their product and
their greatest common divisor (i.e., (<em>a</em> &middot; <em>b</em>)/<em>gcd</em>(<em>a</em>,<em>b</em>)). It
should be observed that the least common multiple of three numbers is simply
<em>lcm</em>(<em>lcm</em>(<em>a</em>,<em>b</em>),<em>c</em>), and we can continue this down the line.</p>
<p>It was at this point that I said to myself, "That sounds a lot like the
folding that Matt Might talked about, and I bet all of my other solutions are
simply moronic." I was basically correct.</p>
<p>The key here is in the repeated applicaiton of the <em>lcm</em> function over
accumulated results. That's the textbook implication for folding, I guess.</p>
<div class="codehilite"><pre><span></span><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">euler5-3</span> <span class="nv">rng</span><span class="p">)</span>
  <span class="p">(</span><span class="k">letrec </span><span class="p">([</span><span class="nv">my-gcd</span> <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">x</span> <span class="nv">y</span><span class="p">)</span>
                     <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">= </span><span class="mi">0</span> <span class="p">(</span><span class="nf">%</span> <span class="nv">x</span> <span class="nv">y</span><span class="p">))</span> <span class="nv">y</span> <span class="p">(</span><span class="nf">my-gcd</span> <span class="nv">y</span> <span class="p">(</span><span class="nf">%</span> <span class="nv">x</span> <span class="nv">y</span><span class="p">))))]</span>
           <span class="p">[</span><span class="nv">my-lcm</span> <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">x</span> <span class="nv">y</span><span class="p">)</span>
                     <span class="p">(</span><span class="nb">/ </span><span class="p">(</span><span class="nb">* </span><span class="nv">x</span> <span class="nv">y</span><span class="p">)</span> <span class="p">(</span><span class="nf">my-gcd</span> <span class="nv">x</span> <span class="nv">y</span><span class="p">)))])</span>
    <span class="p">(</span><span class="nf">foldl</span> <span class="p">(</span><span class="err">λ</span> <span class="p">(</span><span class="nf">x</span> <span class="nv">result</span><span class="p">)</span> <span class="p">(</span><span class="nf">my-lcm</span> <span class="nv">result</span> <span class="nv">x</span><span class="p">))</span> <span class="mi">1</span> <span class="nv">rng</span><span class="p">)))</span>
</pre></div>


<p>The implementations of <code>my-gcd</code> and <code>my-lcm</code> are perhaps a bit superfluous
given that they are features of the language already, but part of the exercise
is in writing the elementary functions&mdash;and I haven't done that in years
and years anyway (maybe since high school AP Computer Science?).</p>
<p>In brief, we see a lambda function passed to <code>foldl</code>: it takes two parameters,
one which is the next item in the range (<code>x</code>) and the accumulated least common
multiple (<code>result</code>). It calculates <em>lcm</em>(<em>result</em>,<em>x</em>). <code>foldl</code> takes two
other parameters: the initial value (1) and the set of values over which to
operate (<code>rng</code>). More nicely formatted:</p>
<div class="codehilite"><pre><span></span><span class="p">(</span><span class="nf">foldl</span>
   <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">x</span> <span class="nv">result</span><span class="p">)</span> <span class="p">(</span><span class="nf">my-lcm</span> <span class="nv">result</span> <span class="nv">x</span><span class="p">))</span>  <span class="c1">; the function to be folded</span>
   <span class="mi">1</span>                                      <span class="c1">; the initial value</span>
   <span class="nv">rng</span>                                    <span class="c1">; the range passed in to euler5-3</span>
<span class="p">)</span>
</pre></div>


<p>Lo-and-behold, it worked! It felt like learning, as though I'd kind of finally
realized a little bit about how Racket is structured. I've had a similar
experience with lexical scoping, but I don't know that I've grasped the full
implications yet...and that's another topic for another day.</p></div>
        <footer class="article-footer">
            <a data-url="https://methanm.github.io/https://methanm.github.io/Racket-Reading/" class="article-share-link">Share</a>


            <ul class="article-tag-list">
                <li class="article-tag-list-item"><a class="article-tag-list-link" href="https://methanm.github.io/tags/racket">racket</a></li>
            </ul>

        </footer>
    </div>
</article>



                        </div>
                    </section>
                    <aside id="sidebar">
  <a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a>
  <div class="sidebar-top">
    <p>follow:</p>
    <ul class="social-links">






        <li><a class="social-tooltip" title="rss" href="https://methanm.github.io/rss.xml" target="_blank"><i id="icon-rss" class="icon"></i></a></li>

    </ul>
  </div>

  <div class="widgets-container">
        <div class="widget-wrap">
<h3 class="widget-title">recents</h3>
<div class="widget">
    <ul id="recent-post" class="">
        <li>
            <div class="item-thumbnail">
                <a href="https://methanm.github.io/Racket-Reading/" class="thumbnail">
                        <span class="thumbnail-image thumbnail-none"></span>
                </a>
            </div>
            <div class="item-inner">
                <p class="item-category">
                    <a class="article-category-link" href="https://methanm.github.io/categories/programming">Programming
                    </a>
                </p>
                <p class="item-title"><a href="https://methanm.github.io/Racket-Reading/" class="title">Racket Reading</a></p>
                <p class="item-date"><time datetime="2015-03-03T00:13:55.108Z" itemprop="datePublished">2016-10-08</time></p>
            </div>
        </li>
        <li>
            <div class="item-thumbnail">
                <a href="https://methanm.github.io/Platform-Partisanship/" class="thumbnail">
                        <span class="thumbnail-image thumbnail-none"></span>
                </a>
            </div>
            <div class="item-inner">
                <p class="item-category">
                    <a class="article-category-link" href="https://methanm.github.io/categories/programming">Programming
                    </a>
                </p>
                <p class="item-title"><a href="https://methanm.github.io/Platform-Partisanship/" class="title">Platform Partisanship</a></p>
                <p class="item-date"><time datetime="2015-03-03T00:13:55.108Z" itemprop="datePublished">2016-09-30</time></p>
            </div>
        </li>
        <li>
            <div class="item-thumbnail">
                <a href="https://methanm.github.io/Racket-and-Euler-4/" class="thumbnail">
                        <span class="thumbnail-image thumbnail-none"></span>
                </a>
            </div>
            <div class="item-inner">
                <p class="item-category">
                    <a class="article-category-link" href="https://methanm.github.io/categories/programming">programming
                    </a>
                </p>
                <p class="item-title"><a href="https://methanm.github.io/Racket-and-Euler-4/" class="title">Racket and Euler 4</a></p>
                <p class="item-date"><time datetime="2015-03-03T00:13:55.108Z" itemprop="datePublished">2016-09-25</time></p>
            </div>
        </li>
        <li>
            <div class="item-thumbnail">
                <a href="https://methanm.github.io/More-on-Racket/" class="thumbnail">
                        <span class="thumbnail-image thumbnail-none"></span>
                </a>
            </div>
            <div class="item-inner">
                <p class="item-category">
                    <a class="article-category-link" href="https://methanm.github.io/categories/programming">programming
                    ,
                    </a>
                    <a class="article-category-link" href="https://methanm.github.io/categories/racket">racket
                    </a>
                </p>
                <p class="item-title"><a href="https://methanm.github.io/More-on-Racket/" class="title">More on Racket</a></p>
                <p class="item-date"><time datetime="2015-03-03T00:13:55.108Z" itemprop="datePublished">2016-09-10</time></p>
            </div>
        </li>
        <li>
            <div class="item-thumbnail">
                <a href="https://methanm.github.io/Racket-and-DSLs/" class="thumbnail">
                        <span class="thumbnail-image thumbnail-none"></span>
                </a>
            </div>
            <div class="item-inner">
                <p class="item-category">
                    <a class="article-category-link" href="https://methanm.github.io/categories/programming">programming
                    </a>
                </p>
                <p class="item-title"><a href="https://methanm.github.io/Racket-and-DSLs/" class="title">Racket and DSLs</a></p>
                <p class="item-date"><time datetime="2015-03-03T00:13:55.108Z" itemprop="datePublished">2016-09-02</time></p>
            </div>
        </li>
    </ul>
</div>
</div>

        <div class="widget-wrap widget-list">
    <h3 class="widget-title">categories</h3>
    <div class="widget">
        <ul class="category-list">
                <li class="category-list-item">
                <a class="category-list-link" href="https://methanm.github.io/categories/programming">
                    Programming
                </a>
                <span class="category-list-count">11</span>
                </li>
                <li class="category-list-item">
                <a class="category-list-link" href="https://methanm.github.io/categories/construction">
                    construction
                </a>
                <span class="category-list-count">3</span>
                </li>
                <li class="category-list-item">
                <a class="category-list-link" href="https://methanm.github.io/categories/racket">
                    racket
                </a>
                <span class="category-list-count">1</span>
                </li>
        </ul>
    </div>
</div>

        <div class="widget-wrap widget-list">
    <h3 class="widget-title">archives</h3>
    <div class="widget">
        <ul class="archive-list">
                <li class="archive-list-item">
                <a class="archive-list-link" href="https://methanm.github.io/archives/2016/10">Oct 2016</a>
                <span class="archive-list-count">1</span>
                </li>
                <li class="archive-list-item">
                <a class="archive-list-link" href="https://methanm.github.io/archives/2016/09">Sep 2016</a>
                <span class="archive-list-count">4</span>
                </li>
                <li class="archive-list-item">
                <a class="archive-list-link" href="https://methanm.github.io/archives/2016/08">Aug 2016</a>
                <span class="archive-list-count">1</span>
                </li>
                <li class="archive-list-item">
                <a class="archive-list-link" href="https://methanm.github.io/archives/2016/04">Apr 2016</a>
                <span class="archive-list-count">3</span>
                </li>
                <li class="archive-list-item">
                <a class="archive-list-link" href="https://methanm.github.io/archives/2016/01">Jan 2016</a>
                <span class="archive-list-count">3</span>
                </li>
                <li class="archive-list-item">
                <a class="archive-list-link" href="https://methanm.github.io/archives/2015/11">Nov 2015</a>
                <span class="archive-list-count">2</span>
                </li>
        </ul>
    </div>
</div>

        <div class="widget-wrap widget-float">
<h3 class="widget-title">tag cloud</h3>
<div class="widget tagcloud">
    <a href="https://methanm.github.io/tags/racket" style="font-size: 10px;">racket</a>
    <a href="https://methanm.github.io/tags/programming" style="font-size: 10px;">programming</a>
    <a href="https://methanm.github.io/tags/construction" style="font-size: 10px;">construction</a>
    <a href="https://methanm.github.io/tags/python" style="font-size: 10px;">python</a>
    <a href="https://methanm.github.io/tags/aspect-oriented_programming" style="font-size: 10px;">aspect-oriented programming</a>
    <a href="https://methanm.github.io/tags/premature_optimization" style="font-size: 10px;">premature optimization</a>
    <a href="https://methanm.github.io/tags/programming_potpourri" style="font-size: 10px;">programming potpourri</a>
    <a href="https://methanm.github.io/tags/numpy" style="font-size: 10px;">numpy</a>
    <a href="https://methanm.github.io/tags/tools" style="font-size: 10px;">tools</a>
    <a href="https://methanm.github.io/tags/dsls" style="font-size: 10px;">dsls</a>
    <a href="https://methanm.github.io/tags/euler" style="font-size: 10px;">euler</a>
</div>
</div>


  </div>
</aside>

                </div>
            </div>
        </div>
        <footer id="footer">
<div class="container">
    <div class="container-inner">
        <a id="back-to-top" href="javascript:;"><i class="icon" id="icon-angle-up"></i></a>
        <div class="credit">
            <h1 class="logo-wrap">
                <a href="https://methanm.github.io/" class="logo">Ethan's Thoughts</a>
            </h1>
            <p>© 2015 Ethan</p>
            <p>Powered by <a href="//crotal.org/" target="_blank">Crotal</a>. Theme by <a href="http://alxmedia.se/themes/hueman/" target="_blank">Alexander Agnarson</a></p>
        </div>
    </div>
</div>
</footer>

</body>

    <script type="text/javascript"
            src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>

    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
    </script>





<script src="http://code.jquery.com/jquery-2.1.3.min.js"></script>
<script src="https://methanm.github.io/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>
<script src="https://methanm.github.io/scrollLoading/jquery.scrollLoading.js" type="text/javascript"></script>
<script src="https://methanm.github.io/scrollLoading/main.js" type="text/javascript"></script>
<script src="https://methanm.github.io/js/html-patch.js" type="text/javascript"></script>
<script src="https://methanm.github.io/js/script.js" type="text/javascript"></script>



